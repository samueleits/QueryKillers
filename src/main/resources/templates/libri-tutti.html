
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

    <title>Tutti i Libri - TBR</title>
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
    .book-description {
        font-size: 0.9em;
        color: #555;
        margin-top: 5px;
        display: none;
    }
    .book-card:hover .book-description {
        display: block;
    }
    .book-card img {
  width: 100%;
  max-height: 250px;
  object-fit: cover;
  display: block;
  position: relative;
  z-index: 1;
    }
  .book-info {
  z-index: 2;
}

    
    </style>
</head>
<body class="homepage">
<header class="header">
    <div class="header-content-wrapper">
        <div class="logo">
            <a href="/Home"><h1>LOGO TBR</h1></a>
        </div>
        <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" placeholder="Cerca libro..." id="bookSearchInput">
        </div>
        <div id="autocomplete-results"></div> 
        <div class="user-actions">
            <a href="/profile" class="login-button">Profilo</a>
        </div>
    </div>
</header>

<div class="subheader">
    <div class="subheader-content-wrapper">
        <a href="#" class="subheader-item"><div class="circle-icon"><i class="fas fa-fire"></i></div><span>Novità</span></a>
        <a href="#" class="subheader-item"><div class="circle-icon"><i class="fas fa-star"></i></div><span>Bestseller</span></a>
        <a href="#" class="subheader-item"><div class="circle-icon"><i class="fas fa-trophy"></i></div><span>Challenge</span></a>
        <a href="#" class="subheader-item"><div class="circle-icon"><i class="fas fa-list"></i></div><span>Liste</span></a>
    </div>
</div>

<div class="main-background-container">
<main class="main-content-wrapper">
</footer>


<section class="books-section">
  <div class="section-header">
    <h3><i class="fas fa-book icon"></i> Tutti i libri</h3>
    <span class="view-all">Totale: <strong th:text="${libri.size()}">50</strong> libri</span>
  </div>
  <div class="books-grid">
    <div class="book-card" th:each="libro : ${libri}">
    <img th:src="@{${libro.cover}}" th:alt="${libro.title}">
    <div class="book-info">
        <h4 class="book-title" th:text="${libro.title}">Titolo</h4>
        <p class="book-author" th:text="${libro.author}">Autore</p>
        <p class="book-description" th:text="${libro.description}">Descrizione</p>

        <!-- Bottone per segnare come letto -->
        <button 
            class="read-button"
            th:attr="data-user-id=${user.id}, data-book-id=${libro.id}"
            onclick="toggleLetto(this)">
            ✅ Letto
        </button>
    </div>
</div>

</section>


</main>
</div>

<footer class="footer">
    <div class="footer-content-wrapper">
        <div class="logo"><h1>LOGO TBR</h1></div>
        <div class="copyright">
            <p>&copy; Copyright 2023 | Condizioni d'uso | Informativa sulla privacy | Cookies</p>
        </div>
        <div class="social-icons">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
    </div>
</footer>
 <script th:inline="javascript">
            // Thymeleaf inietta la lista di libri qui dentro
            // Assicurati che il controller passi la lista con nome "libri"
            window.allLibriData = /*[[${libri}]]*/ [];
        </script>

        <script src="/js/autocomplete-script.js"></script>
</body>
</html>
